build:
	cargo build --target x86_64-unknown-linux-musl --release
run:build
	time target/x86_64-unknown-linux-musl/release/vcfgrpaf  test/bbb.vcf.gz  -l test/sample_group_mini  -o bb.vcf.gz 
	#time target/x86_64-unknown-linux-musl/release/vcfgrpaf  test/aaa.vcf.gz  -l test/sample_group_mini  -o aa.vcf.gz 
tru:
	time truvari anno grpaf -l test/sample_group_mini -t AF,MAF,MAC,AC,AN,N_HEMI,N_MISS,N_HOMREF,N_HET,N_HOMALT  -o trivari_aa.vcf.gz  test/bbb.vcf.gz

all: build run tru

cmp:
	bcftools query -f '%CHROM\t%POS\t%INFO/AF_AFR\t%INFO/MAF_AFR\t%INFO/MAC_AFR\t%INFO/AC_AFR\t%INFO/AN_AFR\t%INFO/N_HEMI_AFR\t%INFO/N_MISS_AFR\t%INFO/N_HOMREF_AFR\t%INFO/N_HET_AFR\t%INFO/N_HOMALT_AFR\t%INFO/AF_AIAN\t%INFO/MAF_AIAN\t%INFO/MAC_AIAN\t%INFO/AC_AIAN\t%INFO/AN_AIAN\t%INFO/N_HEMI_AIAN\t%INFO/N_MISS_AIAN\t%INFO/N_HOMREF_AIAN\t%INFO/N_HET_AIAN\t%INFO/N_HOMALT_AIAN\t%INFO/AF_ALL\t%INFO/MAF_ALL\t%INFO/MAC_ALL\t%INFO/AC_ALL\t%INFO/AN_ALL\t%INFO/N_HEMI_ALL\t%INFO/N_MISS_ALL\t%INFO/N_HOMREF_ALL\t%INFO/N_HET_ALL\t%INFO/N_HOMALT_ALL\t%INFO/AF_AMR\t%INFO/MAF_AMR\t%INFO/MAC_AMR\t%INFO/AC_AMR\t%INFO/AN_AMR\t%INFO/N_HEMI_AMR\t%INFO/N_MISS_AMR\t%INFO/N_HOMREF_AMR\t%INFO/N_HET_AMR\t%INFO/N_HOMALT_AMR\t%INFO/AF_EAS\t%INFO/MAF_EAS\t%INFO/MAC_EAS\t%INFO/AC_EAS\t%INFO/AN_EAS\t%INFO/N_HEMI_EAS\t%INFO/N_MISS_EAS\t%INFO/N_HOMREF_EAS\t%INFO/N_HET_EAS\t%INFO/N_HOMALT_EAS\t%INFO/AF_EUR\t%INFO/MAF_EUR\t%INFO/MAC_EUR\t%INFO/AC_EUR\t%INFO/AN_EUR\t%INFO/N_HEMI_EUR\t%INFO/N_MISS_EUR\t%INFO/N_HOMREF_EUR\t%INFO/N_HET_EUR\t%INFO/N_HOMALT_EUR\t%INFO/AF_Hispanic\t%INFO/MAF_Hispanic\t%INFO/MAC_Hispanic\t%INFO/AC_Hispanic\t%INFO/AN_Hispanic\t%INFO/N_HEMI_Hispanic\t%INFO/N_MISS_Hispanic\t%INFO/N_HOMREF_Hispanic\t%INFO/N_HET_Hispanic\t%INFO/N_HOMALT_Hispanic\t%INFO/AF_SAS\t%INFO/MAF_SAS\t%INFO/MAC_SAS\t%INFO/AC_SAS\t%INFO/AN_SAS\t%INFO/N_HEMI_SAS\t%INFO/N_MISS_SAS\t%INFO/N_HOMREF_SAS\t%INFO/N_HET_SAS\t%INFO/N_HOMALT_SAS\n' trivari_aa.vcf.gz |head -n 1000 > trivari_aa.txt
	bcftools query -f '%CHROM\t%POS\t%INFO/AF_AFR\t%INFO/MAF_AFR\t%INFO/MAC_AFR\t%INFO/AC_AFR\t%INFO/AN_AFR\t%INFO/N_HEMI_AFR\t%INFO/N_MISS_AFR\t%INFO/N_HOMREF_AFR\t%INFO/N_HET_AFR\t%INFO/N_HOMALT_AFR\t%INFO/AF_AIAN\t%INFO/MAF_AIAN\t%INFO/MAC_AIAN\t%INFO/AC_AIAN\t%INFO/AN_AIAN\t%INFO/N_HEMI_AIAN\t%INFO/N_MISS_AIAN\t%INFO/N_HOMREF_AIAN\t%INFO/N_HET_AIAN\t%INFO/N_HOMALT_AIAN\t%INFO/AF_ALL\t%INFO/MAF_ALL\t%INFO/MAC_ALL\t%INFO/AC_ALL\t%INFO/AN_ALL\t%INFO/N_HEMI_ALL\t%INFO/N_MISS_ALL\t%INFO/N_HOMREF_ALL\t%INFO/N_HET_ALL\t%INFO/N_HOMALT_ALL\t%INFO/AF_AMR\t%INFO/MAF_AMR\t%INFO/MAC_AMR\t%INFO/AC_AMR\t%INFO/AN_AMR\t%INFO/N_HEMI_AMR\t%INFO/N_MISS_AMR\t%INFO/N_HOMREF_AMR\t%INFO/N_HET_AMR\t%INFO/N_HOMALT_AMR\t%INFO/AF_EAS\t%INFO/MAF_EAS\t%INFO/MAC_EAS\t%INFO/AC_EAS\t%INFO/AN_EAS\t%INFO/N_HEMI_EAS\t%INFO/N_MISS_EAS\t%INFO/N_HOMREF_EAS\t%INFO/N_HET_EAS\t%INFO/N_HOMALT_EAS\t%INFO/AF_EUR\t%INFO/MAF_EUR\t%INFO/MAC_EUR\t%INFO/AC_EUR\t%INFO/AN_EUR\t%INFO/N_HEMI_EUR\t%INFO/N_MISS_EUR\t%INFO/N_HOMREF_EUR\t%INFO/N_HET_EUR\t%INFO/N_HOMALT_EUR\t%INFO/AF_Hispanic\t%INFO/MAF_Hispanic\t%INFO/MAC_Hispanic\t%INFO/AC_Hispanic\t%INFO/AN_Hispanic\t%INFO/N_HEMI_Hispanic\t%INFO/N_MISS_Hispanic\t%INFO/N_HOMREF_Hispanic\t%INFO/N_HET_Hispanic\t%INFO/N_HOMALT_Hispanic\t%INFO/AF_SAS\t%INFO/MAF_SAS\t%INFO/MAC_SAS\t%INFO/AC_SAS\t%INFO/AN_SAS\t%INFO/N_HEMI_SAS\t%INFO/N_MISS_SAS\t%INFO/N_HOMREF_SAS\t%INFO/N_HET_SAS\t%INFO/N_HOMALT_SAS\n' bb.vcf.gz | head -n 1000 > bb.txt
	bcftools query -f '%CHROM\t%POS\t%INFO/AF_AFR\t%INFO/MAF_AFR\t%INFO/MAC_AFR\t%INFO/AC_AFR\t%INFO/AN_AFR\t%INFO/N_HEMI_AFR\t%INFO/N_MISS_AFR\t%INFO/N_HOMREF_AFR\t%INFO/N_HET_AFR\t%INFO/N_HOMALT_AFR\t%INFO/AF_AIAN\t%INFO/MAF_AIAN\t%INFO/MAC_AIAN\t%INFO/AC_AIAN\t%INFO/AN_AIAN\t%INFO/N_HEMI_AIAN\t%INFO/N_MISS_AIAN\t%INFO/N_HOMREF_AIAN\t%INFO/N_HET_AIAN\t%INFO/N_HOMALT_AIAN\t%INFO/AF_ALL\t%INFO/MAF_ALL\t%INFO/MAC_ALL\t%INFO/AC_ALL\t%INFO/AN_ALL\t%INFO/N_HEMI_ALL\t%INFO/N_MISS_ALL\t%INFO/N_HOMREF_ALL\t%INFO/N_HET_ALL\t%INFO/N_HOMALT_ALL\t%INFO/AF_AMR\t%INFO/MAF_AMR\t%INFO/MAC_AMR\t%INFO/AC_AMR\t%INFO/AN_AMR\t%INFO/N_HEMI_AMR\t%INFO/N_MISS_AMR\t%INFO/N_HOMREF_AMR\t%INFO/N_HET_AMR\t%INFO/N_HOMALT_AMR\t%INFO/AF_EAS\t%INFO/MAF_EAS\t%INFO/MAC_EAS\t%INFO/AC_EAS\t%INFO/AN_EAS\t%INFO/N_HEMI_EAS\t%INFO/N_MISS_EAS\t%INFO/N_HOMREF_EAS\t%INFO/N_HET_EAS\t%INFO/N_HOMALT_EAS\t%INFO/AF_EUR\t%INFO/MAF_EUR\t%INFO/MAC_EUR\t%INFO/AC_EUR\t%INFO/AN_EUR\t%INFO/N_HEMI_EUR\t%INFO/N_MISS_EUR\t%INFO/N_HOMREF_EUR\t%INFO/N_HET_EUR\t%INFO/N_HOMALT_EUR\t%INFO/AF_Hispanic\t%INFO/MAF_Hispanic\t%INFO/MAC_Hispanic\t%INFO/AC_Hispanic\t%INFO/AN_Hispanic\t%INFO/N_HEMI_Hispanic\t%INFO/N_MISS_Hispanic\t%INFO/N_HOMREF_Hispanic\t%INFO/N_HET_Hispanic\t%INFO/N_HOMALT_Hispanic\t%INFO/AF_SAS\t%INFO/MAF_SAS\t%INFO/MAC_SAS\t%INFO/AC_SAS\t%INFO/AN_SAS\t%INFO/N_HEMI_SAS\t%INFO/N_MISS_SAS\t%INFO/N_HOMREF_SAS\t%INFO/N_HET_SAS\t%INFO/N_HOMALT_SAS\n' aa.vcf.gz | head -n 1000 > aa.txt
	diff -u aa.txt trivari_aa.txt > diff.txt
	diff -u aa.txt bb.txt > diff_aa_bb.txt
push:
	scp2bcm target/x86_64-unknown-linux-musl/release/vcfgrpaf 